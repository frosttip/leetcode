# 239. Sliding Window Maximum

ğŸ”´ Hard

You are given an array of integers nums, there is a sliding window of size k which is moving from the very left of the array to the very right. You can only see the k numbers in the window. Each time the sliding window moves right by one position.

Return the max sliding window.

Example 1:
```
Input: nums = [1,3,-1,-3,5,3,6,7], k = 3
Output: [3,3,5,5,6,7]
Explanation: 
Window position                Max
---------------               -----
[1  3  -1] -3  5  3  6  7       3
 1 [3  -1  -3] 5  3  6  7       3
 1  3 [-1  -3  5] 3  6  7       5
 1  3  -1 [-3  5  3] 6  7       5
 1  3  -1  -3 [5  3  6] 7       6
 1  3  -1  -3  5 [3  6  7]      7
```

Example 2:
```
Input: nums = [1], k = 1
Output: [1]
```

Constraints:
- 1 <= nums.length <= 105
- -104 <= nums[i] <= 104
- 1 <= k <= nums.length

## Approach
### Monotonic deque
- **Parsing**: 
    é¡Œç›®çµ¦å‡ºä¸€å€‹vectorï¼Œé‚„æœ‰ä¸€å€‹æ•¸å­—Kï¼Œè¦æ±‚é¡ä¼¼ä¸€å€‹é•·åº¦ç‚ºKçš„çª—å£ï¼Œæ±‚å‡ºæ¯æ¬¡å‘å³ç§»å‹•çª—å£å¾Œï¼Œçª—å£ä¹‹ä¸­çš„æœ€å¤§å€¼ï¼Œå°‡æ‰€æœ‰æ•¸å€¼è¨˜éŒ„ä¸‹ä¾†å¾Œå›å‚³ã€‚

    é€™å€‹æ¼”ç®—æ³•å«åšmonotonic dequeï¼Œå–®èª¿éšŠåˆ—ï¼Œåœ¨ç§»å‹•çª—å£çš„æ™‚å€™ï¼Œå°±å°‡æœ€å¤§å€¼ä¿ç•™åœ¨dequeæœ€å‰ç«¯ï¼Œé€™å°±å¯ä»¥ç”¨O(1)çš„æ™‚é–“æŠŠæœ€å¤§å€¼å–å‡ºä¾†ã€‚

    ä»¥é€™é¡Œä¾†èªªï¼Œå»ºç«‹dequeä¾†å­˜æ”¾çª—å£ä¹‹é–“çš„æ•¸å€¼ï¼Œç‚ºä½•è¦ç”¨dequeï¼Œå› ç‚ºé€™é¡Œéœ€è¦å­˜å–æ•¸å€¼åœ¨é€™å€‹queueçš„å‰æ–¹èˆ‡å¾Œæ–¹ï¼Œåªç”¨queueæˆ–æ˜¯vectoråšä¸åˆ°éœ€è¦çš„æ“ä½œï¼Œ
    è€Œdequeå¯ä»¥æŠŠæ•¸å€¼æ”¾åˆ°å‰æ–¹æˆ–æ˜¯å¾Œæ–¹ï¼Œä¹Ÿå¯ä»¥æ”¾å…¥æˆ–å–å‡ºã€‚

    ç”¨é€™é¡Œè§£é‡‹çš„è©±ï¼Œç•¶æŠŠæ•¸å€¼å¡å…¥dequeä¹‹å¾Œï¼Œåªè¦å¾Œä¾†çš„æ•¸å€¼å¤§æ–¼dequeå°¾å·´çš„æ•¸å€¼ï¼Œå°±å°‡å°¾å·´æ•¸å€¼æ‹‹æ£„ï¼Œå¦‚æ­¤ä¸€ä¾†ï¼Œåœ¨dequeé ­çš„æ•¸å€¼å°±å¯ä»¥ç¢ºä¿ç‚ºé€™å€‹windowsä¹‹é–“çš„æœ€å¤§å€¼ï¼Œ
    è€Œè¶…éwindowsçš„æ•¸é‡æ™‚ï¼Œåªè¦æ‹‹æ£„é ­çš„æ•¸å€¼å³å¯ã€‚

    é¦–å…ˆï¼Œè¦å…ˆå»ºç«‹ç”¨ä¾†å›å‚³çš„vectorï¼Œé‚„æœ‰å­˜å–æ•¸å€¼çš„dequeï¼Œ
    ```
    vector<int> ret;
    deque<int> dq;
    int n = nums.size();
    ```
    
    æ¥è‘—æ­·éæ•´å€‹vectorï¼Œ
    ```
    for(int i=0;i<n;i++) {
    ``` 

    æ¥è‘—åˆ¤æ–·dequeä¹‹ä¸­æ˜¯å¦æœ‰æ•¸å€¼ï¼Œå‡å¦‚ä¸ç‚ºç©ºï¼Œæ¯”è¼ƒç•¶å‰æ•¸å€¼æ˜¯å¦å¤§æ–¼dequeå°¾å·´ç•¶å‰çš„æ•¸å€¼ï¼Œå°¾å·´æ•¸å€¼è¼ƒå°å°±æ‹‹æ£„ï¼Œä¸æ–·æ‹‹æ£„åˆ°dequeç‚ºç©ºæˆ–æ˜¯é‡åˆ°æ›´å¤§çš„æ•¸å€¼ï¼Œ
    ```
    while(!dq.empty() && dq.back() < nums[i]) {
        dq.pop_back();
    }
    ```

    æ’é™¤è¼ƒå°æ•¸å€¼å¾Œï¼Œå†å°‡ç•¶å‰æ•¸å€¼å¡å…¥ã€‚
    ```
    dq.push_back(nums[i]);
    ```

    å› ç‚ºå‰›å‰›å·²ç¶“æ–°åŠ å…¥ä¸€å€‹æ•¸äº†ï¼Œæ‰€ä»¥è¦åˆ¤æ–·windowä¸­çš„å…§å®¹æ˜¯ä¸æ˜¯å·²ç¶“è¶…éKäº†ï¼Œ
    ä»¥é€™é¡Œç‚ºä¾‹ï¼Œk=3ï¼Œiä»£è¡¨çš„æ˜¯indexï¼Œæ‰€ä»¥æœƒæ¯”æ•¸é‡å¤šä¸€ï¼Œ
    ç•¶i>=kï¼Œä»£è¡¨windowä¸­çš„æ•¸å€¼æ•¸é‡å·²ç¶“è¶…éKäº†ï¼Œæ‰€ä»¥è¦æ’é™¤æ‰dequeæœ€å‰ç«¯çš„æ•¸å€¼ï¼Œ
    é‚£è¦å¦‚ä½•åˆ¤æ–·é€™é»ï¼Œé€™è£¡é€šéindexä¾†åˆ¤æ–·ï¼Œ
    ä»¥k=3ï¼Œç•¶i=3ï¼Œ0-1-2-3ï¼Œé€™è£¡æœ‰å››å€‹æ•¸å­—ï¼Œè€Œi(3)-k(3)=0ï¼Œi-kå°±æœƒæ˜¯æ‡‰è©²æ’é™¤æ‰çš„æ•¸å€¼ï¼Œ
    åªè¦æŠŠè¼ƒdequeæœ€å‰ç«¯çš„æ•¸å­—æ˜¯å¦ç­‰æ–¼è¦æ’é™¤æ‰çš„æ•¸å€¼ï¼Œç›¸ç­‰å°±æ‹‹æ£„ã€‚
    ```
    if(i>=k && dq.front() == nums[i-k]) {
        dq.pop_front();
    }
    ```
    æœ€å¾Œï¼Œå› ç‚ºè¦åˆ¤æ–·çš„æ˜¯æ¯å€‹windowä¹‹ä¸­çš„æœ€å¤§å€¼ï¼Œè€Œå‰›é–‹å§‹çš„æ™‚å€™ï¼Œ
    windowsä¹‹ä¸­çš„æ•¸å€¼é‚„ä¸å¤ ï¼Œæ‰€ä»¥è¦åˆ¤æ–·ç•¶å‰èµ°åˆ°çš„indexï¼Œ
    æ˜¯å¦å¤§æ–¼ç­‰æ–¼kå¤§å°äº†ï¼Œåªè¦ä¸€å¤§æ–¼ï¼Œé‚£å°±å¯ä»¥é–‹å§‹æŠŠdequeçš„æœ€å‰ç«¯æ•¸å€¼å–å‡ºä¾†æ”¾é€²retä¹‹ä¸­ã€‚
    ```
    if(i-k+1>=0) {
        ret.push_back(dq.front());
    }
    ```
- **ç©ºé–“è¤‡é›œåº¦**: O(N)
- **æ™‚é–“è¤‡é›œåº¦**: O(N)